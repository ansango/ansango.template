---
/**
 * ðŸŒ³ WikiTemplate
 * 
 * @description Specialized template for wiki collection index.
 * Displays hierarchical tree navigation with statistics.
 * 
 * @usage
 * ```astro
 * <WikiTemplate entries={wikiEntries} />
 * ```
 * 
 * @compatible
 * - ðŸŒ³ WikiTree for hierarchical navigation
 * - ðŸ“Š WikiHero with entry/category counts
 * - ðŸ“Œ WikiLegend for instructions
 * - ðŸ“¦ WikiContainer for layout structure
 * - ðŸŽ¯ LayoutDefault wrapper
 */
import type { Entries } from "@/lib/collections";
import { getTreeNode, countCategories, countEntries } from "@/lib/tree-node";
import { LayoutDefault } from "@/components/layout";

import {
  WikiHero,
  WikiContainer,
  WikiTree,
  WikiLegend,
} from "@/components/organisms/wiki";
import { site } from "@/constants";

interface Props {
  entries: Entries;
}

const { entries } = Astro.props;
const meta = site.pages.wiki;
const wikiStructure = getTreeNode(entries, "wiki");
const totalEntries = countEntries(wikiStructure);
const totalCategories = countCategories(wikiStructure);
---

<LayoutDefault {...meta} type="main">
  <WikiHero {totalEntries} {totalCategories} />
  <WikiContainer>
    <WikiTree entries={entries} slot="tree" />
    <WikiLegend slot="legend" />
  </WikiContainer>
</LayoutDefault>
