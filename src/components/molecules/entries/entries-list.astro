---
/**
 * ğŸ“š EntriesList Component
 * 
 * @description Compact list view of entries with dates and titles.
 * Supports both internal and external links with appropriate icons.
 * 
 * @usage
 * ```astro
 * <EntriesList entries={recentPosts} />
 * ```
 * 
 * @compatible
 * - ğŸ“… Displays formatted dates in YYYY Â· MM format
 * - ğŸ”— Uses Link component for navigation
 * - ğŸŒ Shows ExternalLinkIcon for external entries
 * - ğŸ  Used in homepage and collection pages
 */
import type { Entry } from "@/lib/collections";
import { getFormatDate } from "@/lib/utils";
import { Link } from "@/components/atoms";
import { ExternalLinkIcon } from "@/components/icons";
type EntryExternal = Entry & { link?: string; external?: boolean };

interface Props {
  entries: EntryExternal[];
}

const { entries } = Astro.props;
---

<ul class="list-none space-y-2 mb-0">
  {
    entries.map(
      ({ collection, id, link, external, data: { date, title, index } }) => {
        const url = external
          ? link
          : `/${collection}` + (index ? "" : `/${id}`);
        return (
          <li class="list-none">
            <Link
              className="flex items-baseline"
              href={url ?? "#"}
              blank={Boolean(external)}
            >
              {date && (
                <time
                  class="text-muted min-w-20 text-sm whitespace-nowrap"
                  datetime={getFormatDate(date)}
                >
                  {getFormatDate(date, "es-ES", {
                    year: "numeric",
                    month: "2-digit",
                  })
                    .split("/")
                    .reverse()
                    .join(" Â· ")}
                </time>
              )}
              <u class="flex w-full items-center gap-1">
                <span class="line-clamp-1">{title}</span>
                {external && (
                  <ExternalLinkIcon className="inline-flex max-w-4 size-full" />
                )}
              </u>
            </Link>
          </li>
        );
      },
    )
  }
</ul>
