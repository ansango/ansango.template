---
import { site } from "@/constants";
import { LayoutDefault } from "@/components/layout";
import { getArchiveStaticPathsPage } from "@/lib/astro";
import { getSortedCollectionsByYear } from "@/lib/collections";
import {
  ArchiveHero,
  ArchiveList,
  ArchivePagination,
} from "@/components/organisms/archive";

export { getArchiveStaticPathsPage as getStaticPaths };

const { page } = Astro.params;
const entries = await getSortedCollectionsByYear();
const meta = site.pages.archive;
const isIndex = false;

if (!entries) return Astro.redirect("/");
---

<LayoutDefault {...meta} type="main">
  <ArchiveHero entriesCount={entries.length} />
  <ArchiveList {entries} {isIndex} {page} />
  <ArchivePagination {entries} {isIndex} {page} />
</LayoutDefault>
