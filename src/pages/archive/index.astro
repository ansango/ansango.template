---
import { site } from "@/constants";
import { LayoutDefault } from "@/components/layout";
import { getSortedCollectionsByYear } from "@/lib/collections";
import {
  ArchiveHero,
  ArchiveList,
  ArchivePagination,
} from "@/components/organisms/archive";

const entries = await getSortedCollectionsByYear();
const meta = site.pages.archive;

if (!entries) return Astro.redirect("/");
---

<LayoutDefault {...meta} type="main">
  <ArchiveHero entriesCount={entries.length} />
  <ArchiveList {entries} isIndex />
  <ArchivePagination {entries} isIndex />
</LayoutDefault>
