---
import { site } from "@/constants";
import { getTagsGroupedByLetter } from "@/lib/collections";
import { LayoutDefault } from "@/components/layout";
import { TagsHero, TagsTagsCollection } from "@/components/organisms/tags";

const meta = site.pages.tags;
const tags = await getTagsGroupedByLetter();
const countTags = Object.values(tags).reduce(
  (acc, curr) => acc + curr.length,
  0,
);

if (!tags) Astro.redirect("/");
---

<LayoutDefault {...meta} type="main">
  <TagsHero {countTags} />
  <TagsTagsCollection {tags} />
</LayoutDefault>
