---
import { site } from "@/constants";
import { LayoutDefault } from "@/components/layout";
import { getTagStaticPaths } from "@/lib/astro";
import { getCollectionsByTag } from "@/lib/collections";
import {
  TagHero,
  TagContainer,
  TagCollectionsEntries,
  TagPagination,
} from "@/components/organisms/tags/[tag]";
export { getTagStaticPaths as getStaticPaths };

const { tag } = Astro.props;
const entries = await getCollectionsByTag(tag);
const meta = site.pages.tags;

if (!entries) return Astro.redirect("/");
---

<LayoutDefault {...meta} type="main">
  <TagHero {tag} entriesCount={entries.length} />
  <TagContainer>
    <TagCollectionsEntries {entries} isIndex slot="content" />
  </TagContainer>
  <TagPagination {entries} {tag} isIndex slot="pagination" />
</LayoutDefault>
